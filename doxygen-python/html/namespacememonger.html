<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Caffe2 - Python API: memonger Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="/static/favicon.png" type="image/x-icon">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link href="main.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo" width="56"><a href="/"><img alt="Logo" src="Caffe2-with-name-55-tall.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Caffe2 - Python API
   </div>
   <div id="projectbrief">A deep learning, cross platform ML framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.html','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">memonger Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmemonger_1_1AssignmentAlgorithm.html">AssignmentAlgorithm</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a93d26ed2396be79b23d9b31607e02f48"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#a93d26ed2396be79b23d9b31607e02f48">share_grad_blobs</a> (net, losses, param_grads, namescope, dont_share_blobs=None, share_activations=False, blob_shapes=None)</td></tr>
<tr class="separator:a93d26ed2396be79b23d9b31607e02f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0084584781a826ce44cfeca37c799010"><td class="memItemLeft" align="right" valign="top"><a id="a0084584781a826ce44cfeca37c799010"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>optimize_inference_for_dag</b> (net, input_blobs, namescope=&quot;&quot;)</td></tr>
<tr class="separator:a0084584781a826ce44cfeca37c799010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70649dd3a66a3028768181c9889bd7a8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#a70649dd3a66a3028768181c9889bd7a8">topological_sort_traversal_longest_path</a> (g)</td></tr>
<tr class="separator:a70649dd3a66a3028768181c9889bd7a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a830e7a8195377192628568ed03fa1"><td class="memItemLeft" align="right" valign="top"><a id="aa3a830e7a8195377192628568ed03fa1"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>topological_sort_traversal</b> (g)</td></tr>
<tr class="separator:aa3a830e7a8195377192628568ed03fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c19f95e0893189f0805659e25a985e"><td class="memItemLeft" align="right" valign="top"><a id="a31c19f95e0893189f0805659e25a985e"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>compute_ranges</b> (linearized_ops, blob_sizes=None)</td></tr>
<tr class="separator:a31c19f95e0893189f0805659e25a985e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b72ce0d20ba3434359efdd930112d6"><td class="memItemLeft" align="right" valign="top"><a id="a01b72ce0d20ba3434359efdd930112d6"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>is_compatible</b> (candidate_range, assignment, static_blobs)</td></tr>
<tr class="separator:a01b72ce0d20ba3434359efdd930112d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ee634279254101344696da8d282120"><td class="memItemLeft" align="right" valign="top"><a id="ab8ee634279254101344696da8d282120"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>compute_blob_assignments</b> (assignments)</td></tr>
<tr class="separator:ab8ee634279254101344696da8d282120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa29c07d922b7b9e12e7393a79c952c52"><td class="memItemLeft" align="right" valign="top"><a id="aa29c07d922b7b9e12e7393a79c952c52"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>get_memory_usage</b> (assignments)</td></tr>
<tr class="separator:aa29c07d922b7b9e12e7393a79c952c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e32577a149b7cead9b1cdc34764e4df"><td class="memItemLeft" align="right" valign="top"><a id="a7e32577a149b7cead9b1cdc34764e4df"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>compute_assignments_greedy</b> (ranges_sorted, init_assignments=None)</td></tr>
<tr class="separator:a7e32577a149b7cead9b1cdc34764e4df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac168133fbe09188a05f8f50c037ba178"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#ac168133fbe09188a05f8f50c037ba178">compute_assignments_dp</a> (ranges_sorted, init_assignment, counter=None)</td></tr>
<tr class="separator:ac168133fbe09188a05f8f50c037ba178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f2b6ef040f506ce8a6903c5c4831880"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#a8f2b6ef040f506ce8a6903c5c4831880">get_updated_ranges</a> (ranges, max_live=None)</td></tr>
<tr class="separator:a8f2b6ef040f506ce8a6903c5c4831880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d14e670585b88a5c950c4d0a8dca46"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#a46d14e670585b88a5c950c4d0a8dca46">compute_assignments</a> (ranges, static_blobs, algo)</td></tr>
<tr class="separator:a46d14e670585b88a5c950c4d0a8dca46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61f3ecb4f5f429f4af294659c9fb5f6"><td class="memItemLeft" align="right" valign="top"><a id="af61f3ecb4f5f429f4af294659c9fb5f6"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>verify_assignments</b> (assignments)</td></tr>
<tr class="separator:af61f3ecb4f5f429f4af294659c9fb5f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1338a53507c2120103219374ec4e558e"><td class="memItemLeft" align="right" valign="top"><a id="a1338a53507c2120103219374ec4e558e"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>compute_interference_graph</b> (ops)</td></tr>
<tr class="separator:a1338a53507c2120103219374ec4e558e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3091b95bea8d87fb6656cb0c423e6a6d"><td class="memItemLeft" align="right" valign="top"><a id="a3091b95bea8d87fb6656cb0c423e6a6d"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>apply_assignments</b> (net, blob_assignments)</td></tr>
<tr class="separator:a3091b95bea8d87fb6656cb0c423e6a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae06ea76f6a834a299b79fcc918d60a91"><td class="memItemLeft" align="right" valign="top"><a id="ae06ea76f6a834a299b79fcc918d60a91"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>apply_recurrent_blob_assignments</b> (op, blob_assignments, canonical_name)</td></tr>
<tr class="separator:ae06ea76f6a834a299b79fcc918d60a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36250882eb12e04ebd588b1463e7ad77"><td class="memItemLeft" align="right" valign="top"><a id="a36250882eb12e04ebd588b1463e7ad77"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>optimize_inference_fast</b> (net, static_blobs)</td></tr>
<tr class="separator:a36250882eb12e04ebd588b1463e7ad77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a561a19772b488b8cbae6825fd9fa9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#ac2a561a19772b488b8cbae6825fd9fa9">optimize_interference</a> (net, static_blobs, ordering_function=topological_sort_traversal, blob_sizes=None, algo=AssignmentAlgorithm.GREEDY)</td></tr>
<tr class="separator:ac2a561a19772b488b8cbae6825fd9fa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73bbe5708258a15a660c92bedd464c41"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#a73bbe5708258a15a660c92bedd464c41">verify_inplace_blobs</a> (net_a, net_b)</td></tr>
<tr class="separator:a73bbe5708258a15a660c92bedd464c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05413bd1920739da903bb44cf83c44cb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememonger.html#a05413bd1920739da903bb44cf83c44cb">verify_graph_equality</a> (net_a, net_b)</td></tr>
<tr class="separator:a05413bd1920739da903bb44cf83c44cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3726dca89b0242ae95e060d58f34dd5b"><td class="memItemLeft" align="right" valign="top"><a id="a3726dca89b0242ae95e060d58f34dd5b"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>blob_nbytes</b> (blob)</td></tr>
<tr class="separator:a3726dca89b0242ae95e060d58f34dd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3c51ade7ad58a7fd5e9fd01a569b06"><td class="memItemLeft" align="right" valign="top"><a id="aea3c51ade7ad58a7fd5e9fd01a569b06"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>compute_statistics</b> (assignments)</td></tr>
<tr class="separator:aea3c51ade7ad58a7fd5e9fd01a569b06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b300c02affaf4ac1d09f81c4e5d92d1"><td class="memItemLeft" align="right" valign="top"><a id="a0b300c02affaf4ac1d09f81c4e5d92d1"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>collect_blob_sizes</b> (net)</td></tr>
<tr class="separator:a0b300c02affaf4ac1d09f81c4e5d92d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9546e1f5f0b81348a25d6e19d0423e83"><td class="memItemLeft" align="right" valign="top"><a id="a9546e1f5f0b81348a25d6e19d0423e83"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>log</b> = logging.getLogger(&quot;memonger&quot;)</td></tr>
<tr class="separator:a9546e1f5f0b81348a25d6e19d0423e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dbb7ced87beb951a4dba6e8d6c3d384"><td class="memItemLeft" align="right" valign="top"><a id="a1dbb7ced87beb951a4dba6e8d6c3d384"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LiveRange</b> = collections.namedtuple('LiveRange', [&quot;defined&quot;, &quot;used&quot;, &quot;size&quot;])</td></tr>
<tr class="separator:a1dbb7ced87beb951a4dba6e8d6c3d384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c3833d27154c1accc7608d39868776"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>Optimization</b></td></tr>
<tr class="separator:ad7c3833d27154c1accc7608d39868776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3046db2bd46b03ee124cc10ab18aac51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>Statistics</b></td></tr>
<tr class="separator:a3046db2bd46b03ee124cc10ab18aac51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Module caffe2.python.memonger </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a46d14e670585b88a5c950c4d0a8dca46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46d14e670585b88a5c950c4d0a8dca46">&#9670;&nbsp;</a></span>compute_assignments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.compute_assignments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>static_blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>algo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">algo: Method used to find assignments (AssignmentAlgorithm.GREEDY or
      AssignmentAlgorithm.DYNAMIC_PROGRAMMING).
      AssignmentAlgorithm.DYNAMIC_PROGRAMMING gives optimal solution at the
      cost of more computation.
      AssignmentAlgorithm.GREEDY may be better in the case 'blob_sizes' is
      not provided.
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00816">816</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="ac168133fbe09188a05f8f50c037ba178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac168133fbe09188a05f8f50c037ba178">&#9670;&nbsp;</a></span>compute_assignments_dp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.compute_assignments_dp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ranges_sorted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>init_assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counter</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute assignment for blobs in 'ranges_sorted' on top of 'init_assignment'
    using dynamic programming + recursion.

    ranges_sorted: blobs sorted by 'used'
    init_assignment: assignment to start with, blobs in 'ranges_sorted' should
                     not be used in 'init_assignment'

    Using f(b, k, init) to represent the best assignment for blobs b[0:k]
    given initial assignment 'init', we have
        f(b, k, init) = f(b, j, init) +
                        find_best(b[j:k], f(b, j, init))
    where j is the index of the last best assignment that is independent of
    blob b[k - 1] (b[k - 1] is compatible with all assignments in
    f(b, j, init)), and find_best(b1, init1) gives the best assignment
    for blobs in 'b1' based on the initial assignment 'init1', and blobs
    b1[0:-1] should be incompatible with b1[-1]. f(b, len(b), []) gives
    the best assignment for blobs 'b'.

    For find_best(b, init), since b[0:-1] are not compatible with b[-1], we
    could reduce it to a smaller problem to find best assignment for b[0:-1]
    as
        find_best(b, init) = min {
            f(b[0:-1], len(b) - 1, init - x) + [x, b[-1]] for x in init, or
            f(b[0:-1], len(b) - 1, init) + [b[-1]]
        }
    where min{} gives the assignment with minimum memory usage.
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00669">669</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="a8f2b6ef040f506ce8a6903c5c4831880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f2b6ef040f506ce8a6903c5c4831880">&#9670;&nbsp;</a></span>get_updated_ranges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.get_updated_ranges </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_live</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set LiveRange.defined = -1 if it is None
    Set LiveRange.used = max_live if it is None
    Set LiveRanee.size = 1 if it is None
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00789">789</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="ac2a561a19772b488b8cbae6825fd9fa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a561a19772b488b8cbae6825fd9fa9">&#9670;&nbsp;</a></span>optimize_interference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.optimize_interference </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>static_blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ordering_function</em> = <code>topological_sort_traversal</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blob_sizes</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>algo</em> = <code>AssignmentAlgorithm.GREEDY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">ordering_function: topological_sort_traversal or
                   topological_sort_traversal_longest_path.
                   topological_sort_traversal_longest_path gives better
                   results but needs a bit more computation.
algo: Method used to find assignments (AssignmentAlgorithm.GREEDY or
      AssignmentAlgorithm.DYNAMIC_PROGRAMMING).
      AssignmentAlgorithm.DYNAMIC_PROGRAMMING gives optimal solution at the
      cost of more computation.
      AssignmentAlgorithm.GREEDY may be better in the case 'blob_sizes' is
      not provided.
</pre><pre class="fragment">1) Use a BFS traversal of the execution graph to generate an
   ordering of the node executions.
2) Generate use-def ranges for each `blob` in the BFS traversal
   order.
3) Assign blobs to `canonical blobs`
4) Rename blobs to canonical blobs
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00935">935</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="a93d26ed2396be79b23d9b31607e02f48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93d26ed2396be79b23d9b31607e02f48">&#9670;&nbsp;</a></span>share_grad_blobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.share_grad_blobs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>losses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_grads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>namescope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dont_share_blobs</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>share_activations</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blob_shapes</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Implements similar optimization as Torch's shareGradInput():
for the gradients that are passed between layers, share blobs between
operators when possible. This yields significant memory savings with
deep networks.

Returns an optimized protobuf (assign to net._net)
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00026">26</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="a70649dd3a66a3028768181c9889bd7a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70649dd3a66a3028768181c9889bd7a8">&#9670;&nbsp;</a></span>topological_sort_traversal_longest_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.topological_sort_traversal_longest_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>g</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The graph 'g' may contain several source nodes (nodes without incoming
    edge), which could be in any order and still be a valid
    topological sorting result. We would like to arrange these source nodes
    so that the average live spans of the computed blobs are shorter.
    The idea is to sort the source nodes based on the length of their path to
    the target node so that the one with longer path is used first.
    This is done by:
    - Add a single target node if there are multiple target nodes in 'g'.
    - Find the longest path between each source and the target node.
    - Convert the longest paths to a tree with the target node being the root
      and source nodes being the leaves.
    - Sort the nodes of the tree based on the height of the tree.
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00539">539</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="a05413bd1920739da903bb44cf83c44cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05413bd1920739da903bb44cf83c44cb">&#9670;&nbsp;</a></span>verify_graph_equality()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.verify_graph_equality </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Determines if the execution of two graphs are identical.
That is, all inputs blobs are mapped to the same output blobs
for each operator in their respective positions.

This is meant to check the output of memonger with the original graph.
It assumes that the nets have same external input and output.

O(E) runtime + O(1) amortized cost to hash for python dict
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l01005">1005</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="a73bbe5708258a15a660c92bedd464c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73bbe5708258a15a660c92bedd464c41">&#9670;&nbsp;</a></span>verify_inplace_blobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memonger.verify_inplace_blobs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Verifies that net_a and net_b have the same in-place blob assignments.
Particularly, that memonger did not add an in-place assignment when that
did not exist before.
</pre> 
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00983">983</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad7c3833d27154c1accc7608d39868776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c3833d27154c1accc7608d39868776">&#9670;&nbsp;</a></span>Optimization</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memonger.Optimization</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  collections.namedtuple(</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="stringliteral">&#39;Optimization&#39;</span>, [<span class="stringliteral">&#39;net&#39;</span>, <span class="stringliteral">&#39;assignments&#39;</span>, <span class="stringliteral">&#39;blob_assignments&#39;</span>])</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l00879">879</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
<a id="a3046db2bd46b03ee124cc10ab18aac51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3046db2bd46b03ee124cc10ab18aac51">&#9670;&nbsp;</a></span>Statistics</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memonger.Statistics</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  collections.namedtuple(</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="stringliteral">&#39;Statistics&#39;</span>, [<span class="stringliteral">&#39;baseline_nbytes&#39;</span>, <span class="stringliteral">&#39;optimized_nbytes&#39;</span>])</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="memonger_8py_source.html#l01056">1056</a> of file <a class="el" href="memonger_8py_source.html">memonger.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 12 2020 23:27:59 for Caffe2 - Python API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
<div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <div class="footerBlocks">
      <div id="fb_oss" class="footerSection fbOpenSourceFooter">
          <svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px" height=50 width=50>
            <g>
              <path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z" />
              <path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z" />
              <path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z" />
            </g>
          </svg>
        <h2>Facebook Open Source</h2>
      </div>
      <div class="footerSection">
        <a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">Open Source Projects</a>
        <a class="footerLink" href="https://github.com/facebook/" target="_blank">GitHub</a>
        <a class="footerLink" href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a>
      </div>
      <div class="footerSection rightAlign">
        <a class="footerLink" href="https://github.com/caffe2/caffe2" target="_blank">Contribute to this project on GitHub</a>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="/js/jekyll-link-anchors.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '{{ site.gacode }}', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
